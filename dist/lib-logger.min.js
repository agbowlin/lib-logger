!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.lib_logger=o():e.lib_logger=o()}("undefined"!=typeof self?self:this,(function(){return function(e){var o={};function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,o){if(1&o&&(e=t(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)t.d(n,r,function(o){return e[o]}.bind(null,r));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=4)}([function(e,o){e.exports=require("path")},function(e,o){e.exports=require("fs")},function(e,o,t){"use strict";o.NewLogTarget=function(){let e={Config:{}};return e.Config.DeviceName="",e.Config.LogLevels="",e.Config.OutputGroup=!0,e.Config.OutputDate=!0,e.Config.OutputTime=!0,e.Config.OutputMilliseconds=!0,e.Config.OutputTimezone=!0,e.Config.OutputSeverity=!0,e.Config.OutputSeverityWord=!0,e.OnPrepareLogEntry=e=>{throw new Error("Function [OnPrepareLogEntry] not implemented by LogTarget!")},e.OnRenderLogText=(e,o,t)=>{throw new Error("Function [OnRenderLogText] not implemented by LogTarget!")},e}},function(e,o){const t={UnsetAll:0,Bold:1,Dim:2,Underlined:4,Blink:5,Invert:7,Hidden:8,UnsetBold:21,UnsetDim:22,UnsetUnderlined:24,UnsetBlink:25,UnsetInvert:27,UnsetHidden:28};o.ShellBackcolor={Default:49,Black:40,Red:41,Green:42,Yellow:43,Blue:44,Magenta:45,Cyan:46,LightGray:47,DarkGray:100,LightRed:101,LightGreen:102,LightYellow:103,LightBlue:104,LightMagenta:105,LightCyan:106,White:107},o.ShellForecolor={Default:39,Black:30,Red:31,Green:32,Yellow:33,Blue:34,Magenta:35,Cyan:36,LightGray:37,DarkGray:90,LightRed:91,LightGreen:92,LightYellow:93,LightBlue:94,LightMagenta:95,LightCyan:96,White:97},o.ShellEffect=t,o.ShellText=function(e,o,n,r){if(!o&&!n&&!r)return e;let i="[";return o&&(i+=o+";"),n&&(i+=n+";"),r&&(i+=r+";"),i=i.substr(0,i.length-1)+"m",i+=e,i+=`[${t.UnsetAll}m`,i}},function(e,o,t){"use strict";let n=t(5).Logger,r=t(6).NewLogger,i=t(7).NewConsoleLogTarget,l=t(8).NewShellLogTarget,g=t(9).NewFileLogTarget,s=e=>r(i(e)),u=e=>r(l(e)),a=e=>r(g(e));const c=t(3);"undefined"!=typeof window&&(window.Logger=n,window.NewLogger=r,window.NewConsoleLogTarget=i,window.NewShellLogTarget=l,window.NewFileLogTarget=g,window.NewConsoleLogger=s,window.NewShellLogger=u,window.NewFileLogger=a,window.ShellBackcolor=c.ShellBackcolor,window.ShellForecolor=c.ShellForecolor,window.ShellEffect=c.ShellEffect,window.ShellText=c.ShellText),o.Logger=n,o.NewLogger=r,o.NewConsoleLogTarget=i,o.NewShellLogTarget=l,o.NewFileLogTarget=g,o.NewConsoleLogger=s,o.NewShellLogger=u,o.NewFileLogger=a,o.ShellBackcolor=c.ShellBackcolor,o.ShellForecolor=c.ShellForecolor,o.ShellEffect=c.ShellEffect,o.ShellText=c.ShellText},function(e,o,t){"use strict";o.Logger=function(e,o,n){var r="";r="undefined"!=typeof phantom?"phantomjs":void 0!==t(0)?"nodejs":"browser";var i=null,l=null;var g={Config:{group:"",always_use_utc:!1,targets:[]},AddLogTarget:function(e,o){var t={log_device:e,log_levels:o=o||"TDIWEF",output_group:!0,output_date:!0,output_time:!0,output_milliseconds:!0,output_timezone:!0,output_severity:!0,output_severity_words:!0,log_path:"",log_filename:"logger",log_extension:"log",use_hourly_logfiles:!1,use_daily_logfiles:!1};return g.Config.targets.push(t),t}};return g.SendTextToLogTarget=function(e,o,n){if(n.log_device=n.log_device.toLowerCase(),"console"==n.log_device||"stdout"==n.log_device)console.log(o);else if("stderr"==n.log_device)console.error(o);else if("file"==n.log_device){var g=n.log_filename;n.use_hourly_logfiles?g+="-"+e.toISOString().slice(0,13).replace(/T/g,"-"):n.use_daily_logfiles&&(g+="-"+e.toISOString().slice(0,10)),n.log_extension&&(g+="."+n.log_extension),function(e,o,n){if("browser"!=r){if("nodejs"!=r)return"phantomjs"==r?(i||(i=t(1)),(g=e)&&(g+=i.separator),g+=o,void i.write(g,n+"\n","a")):void 0;i||(i=t(1)),l||(l=t(0));var g=l.join(e,o);i.appendFileSync(g,n+"\n")}}(n.log_path,g,o)}},g.LogMessage=function(e,o,t){var n=new Date,r={};r.group=g.Config.group,r.date=n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2),r.time=("0"+n.getHours()).slice(-2)+":"+("0"+n.getMinutes()).slice(-2)+":"+("0"+n.getSeconds()).slice(-2),r.milliseconds=("000"+n.getMilliseconds()).slice(-4);var i=n.getTimezoneOffset()%60,l=(n.getTimezoneOffset()-i)/60;return r.timezone=("0"+l).slice(-2)+("0"+i).slice(-2),o=o||"INFO",r.severity=o.substr(0,1).toUpperCase(),"T"==r.severity?r.severity_word="TRACE":"D"==r.severity?r.severity_word="DEBUG":"I"==r.severity?r.severity_word="INFO ":"W"==r.severity?r.severity_word="WARN ":"E"==r.severity?r.severity_word="ERROR":"F"==r.severity?r.severity_word="FATAL":r.severity_word=o,r.message=e,g.Config.targets.forEach((function(e){if(e.log_levels=e.log_levels.toUpperCase(),e.log_levels.indexOf(r.severity)>=0){var o="";e.output_group&&r.group&&(o+="| "+r.group+" "),e.output_date&&r.date&&(o+="| "+r.date+" "),e.output_time&&r.time&&(o+="| "+r.time+" "),e.output_milliseconds&&r.milliseconds&&(o+="| "+r.milliseconds+" "),e.output_timezone&&r.timezone&&(o+="| "+r.timezone+" "),e.output_severity_words?o+="| "+r.severity_word+" ":e.output_severity&&(o+="| "+r.severity+" "),o+="| "+r.message,t&&(o+="\n"+JSON.stringify(t,void 0,"    ")),g.SendTextToLogTarget(n,o,e)}})),r},g.LogTrace=function(e,o){g.LogMessage(e,"TRACE",o)},g.LogDebug=function(e,o){g.LogMessage(e,"DEBUG",o)},g.LogInfo=function(e,o){g.LogMessage(e,"INFO",o)},g.LogWarn=function(e,o){g.LogMessage(e,"WARN",o)},g.LogWarning=function(e,o){g.LogMessage(e,"WARN",o)},g.LogError=function(e,o){g.LogMessage(e,"ERROR",o)},g.LogFatal=function(e,o){g.LogMessage(e,"FATAL",o)},g.trace=function(e,o){g.LogMessage(e,"TRACE",o)},g.debug=function(e,o){g.LogMessage(e,"DEBUG",o)},g.info=function(e,o){g.LogMessage(e,"INFO",o)},g.log=function(e,o){g.LogMessage(e,"INFO",o)},g.warn=function(e,o){g.LogMessage(e,"WARN",o)},g.warning=function(e,o){g.LogMessage(e,"WARN",o)},g.error=function(e,o){g.LogMessage(e,"ERROR",o)},g.fatal=function(e,o){g.LogMessage(e,"FATAL",o)},g.LogBlankLine=function(){var e=new Date;g.Config.targets.forEach((function(o){g.SendTextToLogTarget(e,"",o)}))},g.LogSeparatorLine=function(){var e=new Date;g.Config.targets.forEach((function(o){g.SendTextToLogTarget(e,"==========================================",o)}))},g.Config.group=e||"",void 0!==o&&g.AddLogTarget(o,n),g}},function(e,o,t){"use strict";o.NewLogger=function(e){let o={};return o.Group=e,o.LogTargets=[],o.AddLogTarget=function(e){return o.LogTargets.push(e),e},o.LogMessageRaw=function(e){var t=new Date;o.LogTargets.forEach((function(o){o.OnRenderLogText(t,{},e)}))},o.LogMessage=function(e,t,n){var r=new Date,i={};i.group=o.Group,i.date=r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2),i.time=("0"+r.getHours()).slice(-2)+":"+("0"+r.getMinutes()).slice(-2)+":"+("0"+r.getSeconds()).slice(-2),i.milliseconds=("000"+r.getMilliseconds()).slice(-4);var l=r.getTimezoneOffset()%60,g=(r.getTimezoneOffset()-l)/60;return i.timezone=("0"+g).slice(-2)+("0"+l).slice(-2),t=t||"INFO",i.severity=t.substr(0,1).toUpperCase(),"T"==i.severity?i.severity_word="TRACE":"D"==i.severity?i.severity_word="DEBUG":"I"==i.severity?i.severity_word="INFO ":"W"==i.severity?i.severity_word="WARN ":"E"==i.severity?i.severity_word="ERROR":"F"==i.severity?i.severity_word="FATAL":i.severity_word=t,i.message=e,o.LogTargets.forEach((function(e){if(e.Config.LogLevels.toUpperCase().indexOf(i.severity)>=0){let t=JSON.parse(JSON.stringify(i));e.OnPrepareLogEntry(t);var o="";e.Config.OutputGroup&&t.group&&(o+="| "+t.group+" "),e.Config.OutputDate&&t.date&&(o+="| "+t.date+" "),e.Config.OutputTime&&t.time&&(o+="| "+t.time+" "),e.Config.OutputMilliseconds&&t.milliseconds&&(o+="| "+t.milliseconds+" "),e.Config.OutputTimezone&&t.timezone&&(o+="| "+t.timezone+" "),e.Config.OutputSeverityWord?o+="| "+t.severity_word+" ":e.Config.OutputSeverity&&(o+="| "+t.severity+" "),o+="| "+t.message,n&&(o+="\n"+JSON.stringify(n,void 0,"    ")),e.OnRenderLogText(r,t,o)}})),i},o.LogTrace=function(e,t){o.LogMessage(e,"TRACE",t)},o.LogDebug=function(e,t){o.LogMessage(e,"DEBUG",t)},o.LogInfo=function(e,t){o.LogMessage(e,"INFO",t)},o.LogWarn=function(e,t){o.LogMessage(e,"WARN",t)},o.LogWarning=function(e,t){o.LogMessage(e,"WARN",t)},o.LogError=function(e,t){o.LogMessage(e,"ERROR",t)},o.LogFatal=function(e,t){o.LogMessage(e,"FATAL",t)},o.trace=function(e,t){o.LogMessage(e,"TRACE",t)},o.debug=function(e,t){o.LogMessage(e,"DEBUG",t)},o.info=function(e,t){o.LogMessage(e,"INFO",t)},o.log=function(e,t){o.LogMessage(e,"INFO",t)},o.warn=function(e,t){o.LogMessage(e,"WARN",t)},o.warning=function(e,t){o.LogMessage(e,"WARN",t)},o.error=function(e,t){o.LogMessage(e,"ERROR",t)},o.fatal=function(e,t){o.LogMessage(e,"FATAL",t)},o.LogBlankLine=()=>o.LogMessageRaw(""),o.LogSeparatorLine=()=>o.LogMessageRaw("=========================================="),o}},function(e,o,t){"use strict";const n=t(2);o.NewConsoleLogTarget=function(e){let o=n.NewLogTarget();return o.Config.DeviceName="console",o.Config.LogLevels=e||"TDIWEF",o.Config.Console={},o.OnPrepareLogEntry=e=>{},o.OnRenderLogText=(e,o,t)=>{console.log(t)},o}},function(e,o,t){"use strict";const n=t(2),r=t(3);o.NewShellLogTarget=function(e){let o=n.NewLogTarget();function t(e,o){return"T"===o?e.TraceColors:"D"===o?e.DebugColors:"I"===o?e.InfoColors:"W"===o?e.WarnColors:"E"===o?e.ErrorColors:"F"===o?e.FatalColors:null}return o.Config.DeviceName="shell",o.Config.LogLevels=e||"TDIWEF",o.Config.Shell={ColorizeEntireLine:!1,ColorizeSeverity:!1,ColorizeMessage:!1,TraceColors:{Backcolor:null,Forecolor:null,Effect:null},DebugColors:{Backcolor:null,Forecolor:null,Effect:null},InfoColors:{Backcolor:null,Forecolor:null,Effect:null},WarnColors:{Backcolor:null,Forecolor:null,Effect:null},ErrorColors:{Backcolor:null,Forecolor:null,Effect:null},FatalColors:{Backcolor:null,Forecolor:null,Effect:null}},o.OnPrepareLogEntry=e=>{if(o.Config.Shell.ColorizeEntireLine)return;let n=t(o.Config.Shell,e.severity);n&&(o.Config.Shell.ColorizeSeverity&&(e.severity=r.ShellText(e.severity,n.Backcolor,n.Forecolor,n.Effect),e.severity_word=r.ShellText(e.severity,n.Backcolor,n.Forecolor,n.Effect)),o.Config.Shell.ColorizeMessage&&(e.message=r.ShellText(e.message,n.Backcolor,n.Forecolor,n.Effect)))},o.OnRenderLogText=(e,n,i)=>{if(o.Config.Shell.ColorizeEntireLine){let e=t(o.Config.Shell,n.severity);e&&(i=r.ShellText(i,e.Backcolor,e.Forecolor,e.Effect))}console.log(i)},o}},function(e,o,t){"use strict";const n=t(2);var r=null;try{r=t(0)}catch(e){}var i=null;try{i=t(1)}catch(e){}o.NewFileLogTarget=function(e){let o=n.NewLogTarget();function t(e,o,t){let n=null;(r||i)&&(r?(n=r.join(e,o),i.appendFile(n,t+"\n",()=>{})):(n=`${e}${i.separator}${o}`,i.write(filename,t+"\n","a")))}return o.Config.DeviceName="file",o.Config.LogLevels=e||"TDIWEF",o.Config.File={LogPath:"",LogFilename:"logger",LogExtension:"log",UseHourlyLogFiles:!1,UseDailyLogFiles:!1},o.OnPrepareLogEntry=e=>{},o.OnRenderLogText=(e,n,r)=>{let i=o.Config.File.LogFilename;o.Config.File.UseHourlyLogFiles?i+="-"+e.toISOString().slice(0,13).replace(/T/g,"-"):o.Config.File.UseDailyLogFiles&&(i+="-"+e.toISOString().slice(0,10)),o.Config.File.LogExtension&&(i+="."+o.Config.File.LogExtension),t(o.Config.File.LogPath,i,r)},o}}])}));